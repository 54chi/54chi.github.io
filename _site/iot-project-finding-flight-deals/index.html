<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>IoT Project: Finding Flight Deals</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/csscomics.css" />
  
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />

    <link rel="canonical" href="http://54chi.github.io/iot-project-finding-flight-deals/" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="54chi" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="IoT Project: Finding Flight Deals" />
    <meta property="og:description" content="Ok. I&#x27;m officially way off my proposed roadmap: I&#x27;ve done very little re:the PM tool and I&#x27;ve not been traveling anywhere (with the exception of a few short trips here and there). Instead, I&#x27;ve been participating in hackathons and..." />
    <meta property="og:url" content="http://54chi.github.io/iot-project-finding-flight-deals/" />
    <meta property="og:image" content="http://54chi.github.io/content/images/2016/05/Photophone_transmitter.jpg" />
    <meta property="article:published_time" content="2016-05-15T22:15:17.828Z" />
    <meta property="article:modified_time" content="2016-05-15T22:22:34.821Z" />
    <meta property="article:tag" content="projects" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="IoT Project: Finding Flight Deals" />
    <meta name="twitter:description" content="Ok. I&#x27;m officially way off my proposed roadmap: I&#x27;ve done very little re:the PM tool and I&#x27;ve not been traveling anywhere (with the exception of a few short trips here and there). Instead, I&#x27;ve been participating in hackathons and..." />
    <meta name="twitter:url" content="http://54chi.github.io/iot-project-finding-flight-deals/" />
    <meta name="twitter:image:src" content="http://54chi.github.io/content/images/2016/05/Photophone_transmitter.jpg" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "54chi",
    "author": {
        "@type": "Person",
        "name": "54chi",
        "url": "http://54chi.github.io/author/54chi",
        "sameAs": null,
        "description": null
    },
    "headline": "IoT Project: Finding Flight Deals",
    "url": "http://54chi.github.io/iot-project-finding-flight-deals/",
    "datePublished": "2016-05-15T22:15:17.828Z",
    "dateModified": "2016-05-15T22:22:34.821Z",
    "image": "http://54chi.github.io/content/images/2016/05/Photophone_transmitter.jpg",
    "keywords": "projects",
    "description": "Ok. I&#x27;m officially way off my proposed roadmap: I&#x27;ve done very little re:the PM tool and I&#x27;ve not been traveling anywhere (with the exception of a few short trips here and there). Instead, I&#x27;ve been participating in hackathons and..."
}
    </script>

    <meta name="generator" content="Ghost 0.7" />
    <link rel="alternate" type="application/rss+xml" title="54chi" href="http://54chi.github.io/rss/" />
</head>
<body class="post-template tag-projects nav-closed">

    <nav class="nav">
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-blog" role="presentation"><a href="../tag/blog.2">Blog</a></li>
            <li class="nav-comics" role="presentation"><a href="../tag/csscomics.2">Comics</a></li>
            <li class="nav-projects" role="presentation"><a href="../tag/projects.2">Projects</a></li>
            <li class="nav-trips" role="presentation"><a href="../tag/trips.2">Trips</a></li>
    </ul>
</nav>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head " style="background-image: url(../content/images/2016/05/Photophone_transmitter.jpg)">
    <nav class="main-nav overlay clearfix">
        <a class="blog-logo" href="http://54chi.github.io"><img src="../content/images/2015/12/127414.png" alt="54chi" /></a>
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-projects">

        <header class="post-header">
            <h1 class="post-title">IoT Project: Finding Flight Deals</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2016-05-15">15 May 2016</time>  on <a href="../tag/projects/index.html">projects</a>
            </section>
        </header>

        <section class="post-content">
            <p>Ok. I'm officially way off my proposed roadmap: I've done very little re:the PM tool and I've not been traveling anywhere (with the exception of a few short trips here and there).</p>

<p>Instead, I've been participating in hackathons and mini-projects, just to keep my brain in shape and get some fresh ideas. The latest mini-project is very straightforward: publish an Amazon Skill by the end of the month. It was inspired by <a href="https://www.hackster.io/challenges/amazon-alexa-skill-contest-one/projects">this</a> though I'm sure my idea is too "practical" and not as cool.</p>

<p>The reason why I want a voice app is because I'm also researching <strong>voice-only design</strong> interfaces. Long story short, it's very interesting, because it finally put <strong>real UX</strong> front and center (e.g. understanding the personas, user journeys, improving the experience). I'll blog about this really soon.</p>

<h4 id="theproblem">The problem</h4>

<p>You want to travel somewhere, but you don't really care where, as long as it is interesting. The usual suspects: Paris, Rome, Tokyo, etc. are fine, but you would prefer to fly there whenever is the cheapest, or better yet: fly somewhere else that you never considered, like Lima or Auckland if the price is right. Is just that there are so many great cities out there that searching for them every single time takes too much effort.</p>

<h4 id="asolution">A solution</h4>

<p>Using a hands-free interface (e.g. voice), find <strong>Travel Deals</strong> from anywhere to anywhere. The experience is akin to asking a friend or colleague the question: <strong>"I want to go to Asia. Where should I go?"</strong>, vs. having a destination set in mind beforehand.</p>

<p>The target personas are people that can be flexible with the destinations and dates, like whimsical travelers or digital nomads.</p>

<p>Voice is especially good at interface traversals because it can help users cut through multiple steps of an interface. No need to follow "steps" every time you need to get something. Just say what you want.</p>

<h4 id="projectdetails">Project Details</h4>

<p>Apple's Siri, Google's Now and Microsoft's Cortana are the most popular voice assistants out there, but Amazon's Alexa is the first one you can easily install on an IoT device and is extendable, as long as you can build the support.</p>

<p>The project shows how to create a Lambda function for handling Alexa Skill requests with:</p>

<ul>
<li>Screen scrapper: Using Cheerio, similar to a <a href="../nodejs-project-oriconcast/index.html">previous project</a>.</li>
<li>Session State: Handles a multi-turn dialog model.</li>
<li>Custom slot type: demonstrates using custom slot types to handle a finite set of known values</li>
<li>SSML: Using SSML tags to control how Alexa renders the text-to-speech.</li>
<li>Support i18n (for future usage and better message configuration)</li>
</ul>

<p>You can run the skill with your Amazon Echo, Tap, Dot; your own <a href="https://github.com/amzn/alexa-avs-raspberry-pi/blob/master/README.md">IoT hardware</a> or smartphone apps like Roger or Lexi.</p>

<p>The full code can be found <a href="https://github.com/54chi/alexa-skills/tree/master/hopperDeals">here</a>.</p>

<p>File structure:</p>

<ul>
<li>index.js is the starter generic file (e.g. the App is called "App" :))</li>
<li>/lib contains the Amazon libraries (AlexaSkill.js)</li>
<li>/src contains the intents and configured dialogs (via i18n)</li>
<li>/test contains the test files (using tape for simplicity)</li>
</ul>

<h4 id="sampleutterances">Sample Utterances</h4>

<pre><code>HopperExplorerIntent for travel deals from {USCity} to {Continent}  
HopperExplorerIntent for travel deals from {USCity}  
HopperExplorerIntent for travel deals to {Continent}  
HopperExplorerIntent from {USCity} to {Continent}  
HopperExplorerIntent from {USCity} to the {Continent} continent  
HopperExplorerIntent new deals from {USCity} to {Continent}  
HopperExplorerIntent what are the cheapest flights from {USCity} to {Continent}  
HopperExplorerIntent show me the best flights from {USCity} to {Continent}  
</code></pre>

<h4 id="testingtheproject">Testing the project</h4>

<p>Unlike most sample code out there (including Amazon's), to me testing the code was a must, at least to make sure there was some results coming back from the Hopper site. Mimicking the HackerNews skill code, I used <a href="https://www.npmjs.com/package/tape">Tape</a>, and added a few extra tests for the Amazon default skills, like "Yes" and "Repeat", to make sure my implementation doesn't break upon publishing.</p>

<p>To test the code, get all dependencies via npm install and then do:</p>

<pre><code>npm test  
</code></pre>

<p>To test the skill, keep in mind the following considerations:</p>

<ul>
<li>Make sure that the you use a <strong>US City</strong> as the origin. The slot type is the AMAZON.US_CITY default one after all.</li>
<li>Make sure the destination is a <strong>continent</strong>.</li>
</ul>

<p>Sample flow:</p>

<ol>
<li>"Alexa, open HopperExplorer"</li>
<li>"new deals from Chicago to Europe"
(the skill should return the first page of results)</li>
<li>After the first page is retrieved, you can say:
<ol><li>"Yes" to retrieve the next page</li>
<li>"Repeat" to repeat the page results</li>
<li>"No" to cancel</li></ol></li>
</ol>

<p>The skill also accept some variations, like: "HopperExplorer from Atlanta to the Asian continent".</p>

<p>You can also say "Anywhere" as the continent, which will also include US cities in the search results, plus anywhere else in the World.</p>

<p>The default values for the US City is <strong>"Seattle"</strong>, and for the Continent is <strong>"Outside US"</strong> (which is anywhere in the world except US)</p>

<h4 id="todo">To do</h4>

<ul>
<li>Save the point of origin in a Database.</li>
<li>Extend the USCIty slot to include other cities around the World.</li>
<li>Save the users' emails and send the results via e-mail. In the meantime, the result could be seen in the Alexa App's cards.</li>
</ul>

<h4 id="notes">Notes</h4>

<p>For educational purposes only. All data stored and retrieved will never be sold nor used for anything really. Analytics may be captured on the Hopper site, but they will be for the Alexa skill, not individual users.</p>

<p>Keep in mind that Hopper deals are basically crowd-sourced, so it can't guarantee you the best deal ever, though it will consistently recommend you better deals than average travel sites (IMHO). If there is demand/need for it, I'll upgrade the email link to redirect you to a booking site (e.g. skyscanner's or google's), but for now it's up to you to go check the deals yourself.</p>

<p>Alexa skill for cities is currently constrained to US only. I may add my own list later, but I need to build the different ways to call for cities, e.g. "Mexico D.F" vs "Mexico City", all those "Saint" vs "St.", dashes, commas, apostrophes, etc. etc.</p>

<p>PS. The skill secretly supports cities as destinations, but the results are not as good (e.g. 10 results for the same airlines, with the same price but different days, which is not what I wanted, user-experience wise).</p>

<p>PS2. Kayak just published its own official skill.</p>

<p>For reporting bugs or suggestions, please email 54chiMaster@gmail.com</p>

<h4 id="credits">Credits</h4>

<p>The Alexa Skill code is a compilation of the following projectS: <br />
- Miguel Mota's Hacker News skill, for the screen scrapping
- Toy Hammered's dailyCutiemals, for the email functionality (which I may use eventually, at least to store the point of origin)</p>

<p>The list of airports/city from <a href="http://codepen.io/mochiron/pen/ONGjwz">http://codepen.io/mochiron/pen/ONGjwz</a> and modified with continents list.</p>

<p>Everything else is based from the NPM packages documentation.</p>
        </section>

        <footer class="post-footer">



            <section class="author">
                <h4><a href="../author/54chi/index.html">54chi</a></h4>

                    <p>Read <a href="../author/54chi/index.html">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=IoT%20Project%3A%20Finding%20Flight%20Deals&amp;url=http://54chi.github.io/iot-project-finding-flight-deals/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://54chi.github.io/iot-project-finding-flight-deals/"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://54chi.github.io/iot-project-finding-flight-deals/"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>

    </article>
</main>

<aside class="read-next">
    <a class="read-next-story " style="background-image: url(../content/images/2016/05/voicedesign-1.jpg)" href="../designing-for-voice-a-point-of-view/index.html">
        <section class="post">
            <h2>Designing for Voice: A Point of View</h2>
            <p>Overview Voice is one of the primary ways of human communication, and predates all others. Voice is natural, and,&hellip;</p>
        </section>
    </a>
    <a class="read-next-story prev " style="background-image: url(../content/images/2016/04/failingship.jpg)" href="../interviewing-tdms/index.html">
        <section class="post">
            <h2>Onboarding 101: How to Find Your Navigation Officer</h2>
            <p>Once your software company is mature enough, you'll most likely require more personnel. You are out of the prototype&hellip;</p>
        </section>
    </a>
</aside>



    </div>


    <script type="text/javascript" src="../assets/js/jquery.min.js"></script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72923351-1', 'auto');
  ga('send', 'pageview');

</script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="../assets/js/index.js"></script>

</body>
</html>
